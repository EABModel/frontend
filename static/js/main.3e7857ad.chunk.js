(this["webpackJsonpvirtual-assistant-frontend"]=this["webpackJsonpvirtual-assistant-frontend"]||[]).push([[0],{152:function(e,t,n){},153:function(e,t,n){},160:function(e,t,n){},194:function(e,t,n){},218:function(e,t,n){},230:function(e,t,n){},233:function(e,t){},235:function(e,t){},245:function(e,t,n){},246:function(e,t,n){},249:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"showPopUpInteractor",(function(){return C})),n.d(a,"closePopUpInteractor",(function(){return y}));var r={};n.r(r),n.d(r,"getCatalogueInteractor",(function(){return M})),n.d(r,"addProductToCatalogueInteractor",(function(){return z})),n.d(r,"addProductsToCatalogueInteractor",(function(){return K})),n.d(r,"deleteProductFromCatalogueInteractor",(function(){return q})),n.d(r,"resetCatalogueInteractor",(function(){return G}));var o={};n.r(o),n.d(o,"loginUserInteractor",(function(){return Oe})),n.d(o,"logoutUserInteractor",(function(){return he})),n.d(o,"resetUserStatusInteractor",(function(){return fe})),n.d(o,"resetUserInteractor",(function(){return ge}));var c={};n.r(c),n.d(c,"registerCompanyInteractor",(function(){return Ze})),n.d(c,"loginCompanyInteractor",(function(){return Qe})),n.d(c,"logoutCompanyInteractor",(function(){return Xe})),n.d(c,"resetCompanyStatusInteractor",(function(){return et})),n.d(c,"resetCompanyInteractor",(function(){return tt}));var s={};n.r(s),n.d(s,"setShopInteractor",(function(){return ut})),n.d(s,"addShopInteractor",(function(){return lt})),n.d(s,"removeShopInteractor",(function(){return dt})),n.d(s,"updateShopInteractor",(function(){return jt})),n.d(s,"resetShopStatusInteractor",(function(){return pt})),n.d(s,"resetShopInteractor",(function(){return bt}));var i={};n.r(i),n.d(i,"setLocalStreamInteractor",(function(){return Rt})),n.d(i,"resetLocalStreamInteractor",(function(){return Et})),n.d(i,"setRemoteStreamInteractor",(function(){return kt})),n.d(i,"resetRemoteStreamInteractor",(function(){return Ut})),n.d(i,"resetStreamConnectionInteractor",(function(){return Lt}));var u=n(0),l=n.n(u),d=n(19),j=n.n(d),p=(n(194),n(10)),b=n(5),m=n(131),O=n(25),h=n(41),f=n(15),g=n(35),v=Object(g.a)({name:"modal",initialState:{open:!1},reducers:{showLogIn:function(e){return Object(b.a)(Object(b.a)({},e),{},{open:!0})},closeLogIn:function(e){return Object(b.a)(Object(b.a)({},e),{},{open:!1})}}}),x=v.reducer,S=v.actions,C=function(){return function(e){e(S.showLogIn())}},y=function(){return function(e){e(S.closeLogIn())}},w=n(36),I={products:[],getCatalogueStatus:{loading:!1,success:!1,error:!1},addProductToCatalogue:{loading:!1,success:!1,error:!1},addProductsToCatalogue:{loading:!1,success:!1,error:!1},deleteProductFromCatalogue:{loading:!1,success:!1,error:!1}},N=Object(g.a)({name:"catalogue",initialState:I,reducers:{loadingGetCatalogue:function(e){return Object(b.a)(Object(b.a)({},e),{},{getCatalogueStatus:{loading:!0,success:!1,error:!1}})},successGetCatalogue:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{products:Object(w.a)(null===t||void 0===t?void 0:t.payload),getCatalogueStatus:{loading:!1,success:!0,error:!1}})},errorGetCatalogue:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{getCatalogueStatus:{loading:!1,success:!1,error:t.payload||!0}})},loadingAddProductToCatalogue:function(e){return Object(b.a)(Object(b.a)({},e),{},{addProductToCatalogue:{loading:!0,success:!1,error:!1}})},successAddProductToCatalogue:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{products:[].concat(Object(w.a)(e.products),[t.payload]),addProductToCatalogue:{loading:!1,success:!0,error:!1}})},errorAddProductToCatalogue:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{addProductToCatalogue:{loading:!1,success:!1,error:t.payload||!0}})},loadingAddProductsToCatalogue:function(e){return Object(b.a)(Object(b.a)({},e),{},{addProductsToCatalogue:{loading:!0,success:!1,error:!1}})},successAddProductsToCatalogue:function(e){return Object(b.a)(Object(b.a)({},e),{},{addProductsToCatalogue:{loading:!1,success:!0,error:!1}})},errorAddProductsToCatalogue:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{addProductsToCatalogue:{loading:!1,success:!1,error:t.payload||!0}})},loadingDeleteProductFromCatalogue:function(e){return Object(b.a)(Object(b.a)({},e),{},{deleteProductFromCatalogue:{loading:!0,success:!1,error:!1}})},successDeleteProductFromCatalogue:function(e,t){var n=e.products.filter((function(e){var n;return e.id!==(null===t||void 0===t||null===(n=t.payload)||void 0===n?void 0:n.id)}));return Object(b.a)(Object(b.a)({},e),{},{products:n,deleteProductFromCatalogue:{loading:!1,success:!0,error:!1}})},errorDeleteProductFromCatalogue:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{deleteProductFromCatalogue:{loading:!1,success:!1,error:t.payload||!0}})},resetCatalogue:function(e){return Object(b.a)(Object(b.a)({},e),I)}}}),P=N.reducer,T=N.actions,A=n(11),R=n.n(A),E=n(17),k=n(161),U=n.n(k).a.create({baseURL:"https://eabmodel.herokuapp.com/"}),L=function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"post",url:"/catalogue/add-single-product",data:{shopId:t.shopId,name:t.name,brand:t.brand,os:t.os,color:t.color,inches:t.inches,price:t.price}}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"post",url:"/catalogue/add-many-products",data:t}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_={postProductRegister:L,getShopProducts:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"get",url:"/catalogue/shop/".concat(t)}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postProductsRegister:D,postProductDelete:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"delete",url:"/catalogue/delete-product/".concat(t)}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},W=function(e,t,n,a){return function(r){return function(){var o=Object(E.a)(R.a.mark((function o(c){var s;return R.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c(e()),o.prev=1,o.next=4,a(r);case 4:s=o.sent,c(t(s)),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(1),c(n(o.t0));case 11:case"end":return o.stop()}}),o,null,[[1,8]])})));return function(e){return o.apply(this,arguments)}}()}},F=function(e,t,n,a){return function(){return function(){var r=Object(E.a)(R.a.mark((function r(o){var c;return R.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(o(e()),r.prev=1,!a){r.next=6;break}return r.next=5,a();case 5:c=r.sent;case 6:o(t(c)),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),o(n(r.t0));case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));return function(e){return r.apply(this,arguments)}}()}},B=function(e){return function(t){return function(n){n(e(t))}}},H=function(e){return function(){return function(t){t(e())}}},M=W(T.loadingGetCatalogue,T.successGetCatalogue,T.errorGetCatalogue,_.getShopProducts),z=W(T.loadingAddProductToCatalogue,T.successAddProductToCatalogue,T.errorAddProductToCatalogue,_.postProductRegister),K=W(T.loadingAddProductsToCatalogue,T.successAddProductsToCatalogue,T.errorAddProductsToCatalogue,_.postProductsRegister),q=W(T.loadingDeleteProductFromCatalogue,T.successDeleteProductFromCatalogue,T.errorDeleteProductFromCatalogue,_.postProductDelete),G=function(){return function(e){e(T.resetCatalogue())}},V=n(14),Y=n(295),J=Object(Y.a)({root:{maxWidth:345},infoContainer:{textAlign:"left"},media:{height:140}}),$=n(297),Z=n(299),Q=n(300),X=n(301),ee=n(71),te=n(302),ne=n(252),ae=n(1),re=function(e){var t=e.specs,n=J(),a=Object(O.g)(),r=Object(u.useCallback)((function(e){a.push("product/".concat(e,"/details"))}),[]);return Object(ae.jsxs)($.a,{className:n.root,children:[Object(ae.jsxs)(Z.a,{style:{textAlign:"left"},children:[Object(ae.jsx)(Q.a,{className:n.media,image:"CHANGE-LATER",title:"Device"}),Object(ae.jsxs)(X.a,{children:[Object(ae.jsx)(ee.a,{gutterBottom:!0,variant:"h5",component:"h2",children:t.name}),Object(ae.jsx)(ee.a,{variant:"subtitle1",color:"textSecondary",component:"p",children:t.brand}),Object(ae.jsxs)(ee.a,{variant:"subtitle2",color:"textSecondary",component:"p",children:[t.os," ",t.color]}),Object(ae.jsxs)(ee.a,{variant:"subtitle2",color:"textSecondary",component:"p",children:[t.inches," inches display"]}),Object(ae.jsx)(ee.a,{variant:"body2",color:"textSecondary",component:"p",children:"These phones are really good, buy them now."})]})]}),Object(ae.jsxs)(te.a,{children:[Object(ae.jsx)(ne.a,{size:"small",color:"primary",children:"Buy"}),Object(ae.jsx)(ne.a,{size:"small",color:"primary",onClick:function(){return r(t.id)},children:"Details"})]})]})};re.defaultProps={specs:{id:"0",name:"Defaut Device",brand:"Default Brand",os:"Default OS",color:"Default Color",inches:5,price:0}};var oe,ce=n(339),se=Object(Y.a)((function(e){return Object(ce.a)({root:{flexGrow:1},paper:{padding:e.spacing(1),textAlign:"center",color:e.palette.text.secondary},catalogContainer:{width:"50wh",height:"50vh",margin:"auto"},cardContainer:{margin:"5%",boxShadow:"8px 10px 19px 3px rgba(0,0,0,0.31)"}})})),ie=n(332),ue=Object(V.b)((function(e){return{catalogue:e.catalogue}}))((function(e){var t=se(),n=e.catalogue;return Object(ae.jsx)(ie.a,{display:"flex",flexWrap:"wrap",justifyContent:"space-evenly",m:1,p:1,bgcolor:"background.paper",children:null===n||void 0===n?void 0:n.products.map((function(e){return Object(ae.jsx)(ie.a,{className:t.cardContainer,children:Object(ae.jsx)(re,{specs:e})},e.id)}))})})),le=Object(Y.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"50vw",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)},popUp:{position:"fixed",top:"50%",left:"50%",transform:"translate(-50%, -50%)",padding:"1em"},cancelIcon:{position:"absolute",top:"-10",right:"-10"},alertMessage:{textAlign:"left",color:"red",padding:0,margin:0}}}));!function(e){e.ANONYMOUS="ANONYMOUS",e.EMPLOYEE="EMPLOYEE",e.ADMINISTRATOR="ADMINISTRATOR"}(oe||(oe={}));var de={username:"defaultUser",email:"",id:"",sessionType:oe.ANONYMOUS,loginUserStatus:{loading:!1,success:!1,error:!1},logoutUserStatus:{loading:!1,success:!1,error:!1}},je=Object(g.a)({name:"user",initialState:de,reducers:{loadingLoginUser:function(e){return Object(b.a)(Object(b.a)({},e),{},{loginUserStatus:{loading:!0,success:!1,error:!1}})},successLoginUser:function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload),{},{loginUserStatus:{loading:!1,success:!0,error:!1},logoutUserStatus:{loading:!1,success:!1,error:!1}})},errorLoginUser:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{loginUserStatus:{loading:!1,success:!1,error:t.payload||!0}})},loadingLogoutUser:function(e){return Object(b.a)(Object(b.a)({},e),{},{logoutUserStatus:{loading:!0,success:!1,error:!1}})},successLogoutUser:function(e){return Object(b.a)(Object(b.a)(Object(b.a)({},e),de),{},{logoutUserStatus:{loading:!1,success:!0,error:!1}})},errorLogoutUser:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{logoutUserStatus:{loading:!1,success:!1,error:t.payload||!0}})},resetUserStatus:function(e){return Object(b.a)(Object(b.a)({},e),{},{loginUserStatus:de.loginUserStatus,logoutUserStatus:de.logoutUserStatus})},resetUser:function(e){return Object(b.a)(Object(b.a)({},e),de)}}}),pe=je.reducer,be=je.actions,me={getUser:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"get",url:"/user/".concat(t)}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postUserLogin:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"post",url:"/user/auth",data:{email:t.email,password:t.password}}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postUserRegister:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"post",url:"/user/create",data:{username:t.username,email:t.email,password:t.password,confirmPassword:t.confirmPassword}}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Oe=W(be.loadingLoginUser,be.successLoginUser,be.errorLoginUser,me.postUserLogin),he=F(be.loadingLogoutUser,be.successLogoutUser,be.errorLogoutUser,null),fe=function(){return function(e){e(be.resetUserStatus())}},ge=function(){return function(e){e(be.resetUser())}},ve=n(304),xe=n(303),Se=n(305),Ce=n(306),ye=n(337),we=n(311),Ie=n(334),Ne=n(312);function Pe(){return Object(ae.jsxs)(ee.a,{variant:"body2",color:"textSecondary",align:"center",children:["Copyright \xa9 ",Object(ae.jsx)(xe.a,{color:"inherit",href:"https://material-ui.com/",children:"EABModel"})," ",(new Date).getFullYear(),"."]})}var Te,Ae=Object(V.b)((function(e){return{user:e.user}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)(Object(b.a)({},o),a),e))}))((function(e){var t=le(),n=Object(O.g)(),a=e.user,r=Object(u.useState)(""),o=Object(p.a)(r,2),c=o[0],s=o[1],i=Object(u.useState)(""),l=Object(p.a)(i,2),d=l[0],j=l[1];Object(u.useEffect)((function(){a.loginUserStatus.success&&(e.resetUserStatusInteractor(),e.closePopUpInteractor(),n.push("/administration"))}),[n,e,a]);return Object(ae.jsxs)($.a,{className:t.popUp,component:"main",variant:"outlined",children:[Object(ae.jsx)("div",{className:t.cancelIcon,onClick:function(){e.closePopUp()},children:Object(ae.jsx)(ve.a,{fontSize:"large",color:"secondary"})}),Object(ae.jsx)(Se.a,{}),Object(ae.jsxs)("div",{className:t.paper,children:[a.loginUserStatus.loading&&Object(ae.jsx)(Ce.a,{}),Object(ae.jsx)(ee.a,{component:"h1",variant:"h5",children:"Sign in"}),Object(ae.jsxs)("div",{className:t.form,children:[Object(ae.jsx)(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,onChange:function(e){s(e.target.value)}}),Object(ae.jsx)(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",onChange:function(e){j(e.target.value)}}),Object(ae.jsx)(we.a,{control:Object(ae.jsx)(Ie.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(ae.jsx)(ne.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:!(c&&d),onClick:function(){var t={email:c,password:d};e.loginUserInteractor(t)},children:"Sign In"}),Object(ae.jsxs)(Ne.a,{container:!0,children:[Object(ae.jsx)(Ne.a,{item:!0,xs:!0,children:Object(ae.jsx)(xe.a,{href:"#",variant:"body2",children:"\xbfForgot password?"})}),Object(ae.jsx)(Ne.a,{item:!0,xs:!0,children:Object(ae.jsx)(xe.a,{href:"#",variant:"body2",children:"Don't have an account? Sign Up"})})]})]})]}),Object(ae.jsx)(ie.a,{mt:4,children:Object(ae.jsx)(Pe,{})})]})})),Re=n(333),Ee=n(313);n(218);!function(e){e.error="error",e.warning="warning",e.info="info",e.success="success"}(Te||(Te={}));var ke=Object(V.b)(null,(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},a),e))}))((function(e){var t=e.showPopUpInteractor,n=e.resourceName,a=e.severity,r=e.alertTitle,o=e.alertBody,c=e.hasLoginButton;return Object(ae.jsx)("div",{className:"alert-container",children:Object(ae.jsxs)(Re.a,{className:"alert",variant:"filled",severity:a,children:[Object(ae.jsx)(Ee.a,{className:"alert-title",children:r}),o.map((function(e){return Object(ae.jsx)("p",{className:"alert-text",children:e},e)})),c&&Object(ae.jsx)("div",{className:"button-container",children:Object(ae.jsxs)(ne.a,{variant:"contained",onClick:t,children:["Sign in to create ",n]})})]})})})),Ue=n(314),Le=n(163),De=n(167),_e=n.n(De),We=n(127),Fe=(n(230),function(e){var t=e.idleValue,n=e.toggleIdle,a=Object(u.useState)(!1),r=Object(p.a)(a,2),o=r[0],c=r[1];Object(Le.a)({timeout:18e4,onIdle:function(){n(!t),c(!0)},onActive:function(){n(!t),c(!1)},debounce:500});var s={from:{opacity:0,marginTop:-500},to:{opacity:1,marginTop:0}};return Object(ae.jsx)(ae.Fragment,{children:o&&Object(ae.jsx)(We.Spring,{from:s.from,to:s.to,children:function(e){return Object(ae.jsx)(We.animated.div,{style:e,children:Object(ae.jsx)("div",{className:"player-wrapper",children:Object(ae.jsx)(_e.a,{className:"react-player",url:"https://www.youtube.com/watch?v=ivukpkSMoYQ",playing:!0,loop:!0,muted:!0,controls:!0,width:"100%",height:"100%"})})})}})})}),Be=l.a.memo(Fe),He=Object(V.b)((function(e){return{modal:e.modal,company:e.company,shop:e.shop,catalogue:e.catalogue}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)(Object(b.a)({},a),r),e))}))((function(e){var t=e.modal,n=e.company,a=e.shop,r=e.catalogue,o=Object(u.useState)(!1),c=Object(p.a)(o,2),s=c[0],i=c[1],l=Object(u.useState)(!1),d=Object(p.a)(l,2),j=d[0],b=d[1],m=Object(u.useState)(!1),O=Object(p.a)(m,2),h=O[0],f=O[1];Object(u.useEffect)((function(){var e;n.registerCompanyStatus.success||0===(null===n||void 0===n||null===(e=n.shops)||void 0===e?void 0:e.length)?i(!0):i(!1)}),[n.registerCompanyStatus,n]),Object(u.useEffect)((function(){e.getCatalogueInteractor(a.id)}),[e.getCatalogueInteractor]),Object(u.useEffect)((function(){var e;0===(null===r||void 0===r||null===(e=r.products)||void 0===e?void 0:e.length)?b(!0):b(!1)}),[r]);return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(Be,{idleValue:h,toggleIdle:f}),!h&&Object(ae.jsxs)(ae.Fragment,{children:[r.getCatalogueStatus.loading&&Object(ae.jsx)(Ue.a,{color:"secondary"}),s&&Object(ae.jsx)(ke,{resourceName:"shop",severity:Te.warning,alertTitle:"Create a shop",alertBody:["It seems you don't have any shops, create one.","If you already created one, logout your company and sign in as that shop."],hasLoginButton:!0}),j&&Object(ae.jsx)(ke,{resourceName:"product",severity:Te.info,alertTitle:"Add a product or products to your shop's catalogue",alertBody:["In order to display your products, add them first.","You can do that from the administrator menu."],hasLoginButton:!0}),!s&&!j&&Object(ae.jsx)(ue,{}),t.open&&Object(ae.jsx)(Ae,{closePopUp:function(){e.closePopUpInteractor()}})]})]})})),Me=n(315),ze=n(316),Ke=Object(Y.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textAlign:"right",marginLeft:"2rem",marginRight:"2rem",fontSize:"1rem"},btn:{fontSize:"1rem"}}})),qe=Object(V.b)((function(e){return{user:e.user,company:e.company}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)(Object(b.a)({},o),a),e))}))((function(e){var t=e.user,n=e.company,a=Object(O.g)(),r=Ke();return Object(ae.jsx)(Me.a,{position:"static",className:r.root,children:Object(ae.jsxs)(ze.a,{children:[Object(ae.jsx)(ee.a,{variant:"h6",className:r.title,children:"ANONYMOUS"===t.sessionType?"Hello Dear Customer!":"Hello ".concat(t.username,"!")}),"ANONYMOUS"===t.sessionType?Object(ae.jsx)(ne.a,{className:r.btn,color:"inherit",onClick:function(){e.showPopUpInteractor()},disabled:!n.id,children:"Login"}):Object(ae.jsx)(ne.a,{color:"secondary",onClick:function(){e.logoutUserInteractor(),a.replace("/home")},disabled:!n.id,children:"Logout"})]})})})),Ge={id:"",name:"",email:"",shops:[],registerCompanyStatus:{loading:!1,success:!1,error:!1},loginCompanyStatus:{loading:!1,success:!1,error:!1},logoutCompanyStatus:{loading:!1,success:!1,error:!1}},Ve=Object(g.a)({name:"company",initialState:Ge,reducers:{loadingRegisterCompany:function(e){return Object(b.a)(Object(b.a)({},e),{},{registerCompanyStatus:{loading:!0,success:!1,error:!1}})},successRegisterCompany:function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload),{},{registerCompanyStatus:{loading:!1,success:!0,error:!1}})},errorRegisterCompany:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{registerCompanyStatus:{loading:!1,success:!1,error:t.payload||!0}})},loadingLoginCompany:function(e){return Object(b.a)(Object(b.a)({},e),{},{loginCompanyStatus:{loading:!0,success:!1,error:!1}})},successLoginCompany:function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload),{},{loginCompanyStatus:{loading:!1,success:!0,error:!1}})},errorLoginCompany:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{loginCompanyStatus:{loading:!1,success:!1,error:t.payload||!0}})},loadingLogoutCompany:function(e){return Object(b.a)(Object(b.a)({},e),{},{logoutCompanyStatus:{loading:!0,success:!1,error:!1}})},successLogoutCompany:function(e){return Object(b.a)(Object(b.a)(Object(b.a)({},e),Ge),{},{logoutCompanyStatus:{loading:!1,success:!0,error:!1}})},errorLogoutCompany:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{logoutCompanyStatus:{loading:!1,success:!1,error:t.payload||!0}})},resetCompanyStatus:function(e){return Object(b.a)(Object(b.a)({},e),{},{loginCompanyStatus:Ge.loginCompanyStatus,logoutCompanyStatus:Ge.logoutCompanyStatus})},resetCompany:function(e){return Object(b.a)(Object(b.a)({},e),Ge)}}}),Ye=Ve.reducer,Je=Ve.actions,$e={postCompanyLogin:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"post",url:"/company/login",data:{name:t.name,password:t.password}}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw console.log(e),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),postCompanyRegister:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"post",url:"/company/create",data:{name:t.name,email:t.email,password:t.password}}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw console.log(e),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Ze=W(Je.loadingRegisterCompany,Je.successRegisterCompany,Je.errorRegisterCompany,$e.postCompanyRegister),Qe=W(Je.loadingLoginCompany,Je.successLoginCompany,Je.errorLoginCompany,$e.postCompanyLogin),Xe=F(Je.loadingLogoutCompany,Je.successLogoutCompany,Je.errorLogoutCompany,null),et=function(){return function(e){e(Je.resetCompanyStatus())}},tt=function(){return function(e){e(Je.resetCompany())}},nt=Object(V.b)((function(e){return{company:e.company}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},c),e))}))((function(e){var t=le(),n=Object(u.useState)(""),a=Object(p.a)(n,2),r=a[0],o=a[1],c=Object(u.useState)(""),s=Object(p.a)(c,2),i=s[0],l=s[1],d=e.company;return Object(ae.jsxs)($.a,{className:t.popUp,component:"main",variant:"outlined",children:[Object(ae.jsx)(Se.a,{}),Object(ae.jsxs)("div",{className:t.paper,children:[d.loginCompanyStatus.loading&&Object(ae.jsx)(Ce.a,{}),Object(ae.jsx)(ee.a,{component:"h1",variant:"h5",children:"Company Sign in"}),Object(ae.jsxs)("div",{className:t.form,children:[Object(ae.jsx)(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Company name",name:"name",autoFocus:!0,onChange:function(e){o(e.target.value)}}),Object(ae.jsx)(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:function(e){l(e.target.value)}}),Object(ae.jsx)(we.a,{control:Object(ae.jsx)(Ie.a,{value:"remember",color:"primary"}),label:"Remember me"}),Object(ae.jsx)(ne.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:!(r&&i),onClick:function(){var t={name:r,password:i};e.loginCompanyInteractor(t)},children:"Company Sign In"})]})]}),Object(ae.jsx)(ne.a,{color:"default",size:"small",onClick:e.toggleForm,children:"Don't have a company, create one"})]})})),at=Object(Y.a)({page:{display:"flex",flexDirection:"column",alignItems:"center"},container:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",padding:"20px",width:"50%",height:"60vh",borderRadius:"8px",overflowY:"scroll"},containerList:{position:"relative",display:"flex",flexDirection:"column",padding:"20px",width:"50%",height:"60vh",borderRadius:"8px",overflowY:"scroll"},shopContainer:{position:"relative",padding:"10px",margin:"15px 0",borderRadius:"8px","box-shadow":"5px 6px 12px -4px rgba(0,0,0,0.75)"},name:{fontSize:"20px",textAlign:"left",padding:0,margin:"0 5px"},location:{fontSize:"15px",textAlign:"left",padding:0,margin:"0 5px"},buttonContainer:{position:"absolute",bottom:"12px",right:"15px"},switchFormTypeContainer:{position:"absolute",left:"50%",top:"20%",transform:"translate(-50%,-50%)"}}),rt={id:"",companyId:"",name:"",location:"",addShopStatus:{loading:!1,success:!1,error:!1},removeShopStatus:{loading:!1,success:!1,error:!1},updateShopStatus:{loading:!1,success:!1,error:!1}},ot=Object(g.a)({name:"shop",initialState:rt,reducers:{setShop:function(e,t){return Object(b.a)(Object(b.a)({},e),t.payload)},loadingAddShop:function(e){return Object(b.a)(Object(b.a)({},e),{},{addShopStatus:{loading:!0,success:!1,error:!1}})},successAddShop:function(e){return Object(b.a)(Object(b.a)({},e),{},{addShopStatus:{loading:!1,success:!0,error:!1}})},errorAddShop:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{addShopStatus:{loading:!1,success:!1,error:t.payload||!0}})},loadingRemoveShop:function(e){return Object(b.a)(Object(b.a)({},e),{},{removeShopStatus:{loading:!0,success:!1,error:!1}})},successRemoveShop:function(e){return Object(b.a)(Object(b.a)({},e),{},{removeShopStatus:{loading:!1,success:!0,error:!1}})},errorRemoveShop:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{removeShopStatus:{loading:!1,success:!1,error:t.payload||!0}})},loadingUpdateShop:function(e){return Object(b.a)(Object(b.a)({},e),{},{updateShopStatus:{loading:!0,success:!1,error:!1}})},successUpdateShop:function(e,t){return Object(b.a)(Object(b.a)(Object(b.a)({},e),t.payload),{},{updateShopStatus:{loading:!1,success:!0,error:!1}})},errorUpdateShop:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{updateShopStatus:{loading:!1,success:!1,error:t.payload||!0}})},resetShopStatus:function(e){return Object(b.a)(Object(b.a)({},e),{},{addShopStatus:rt.addShopStatus,removeShopStatus:rt.removeShopStatus,updateShopStatus:rt.updateShopStatus})},resetShop:function(e){return Object(b.a)(Object(b.a)({},e),rt)}}}),ct=ot.reducer,st=ot.actions,it={postShopRegister:function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U({headers:{"Content-Type":"application/json"},method:"post",url:"/shop/create",data:{companyId:t.companyId,name:t.name,location:t.location}}).then((function(e){return null===e||void 0===e?void 0:e.data})).catch((function(e){throw e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},ut=function(e){return function(t){t(st.setShop(e))}},lt=W(st.loadingAddShop,st.successAddShop,st.errorAddShop,it.postShopRegister),dt=W(st.loadingRemoveShop,st.successRemoveShop,st.errorRemoveShop,null),jt=W(st.loadingUpdateShop,st.successUpdateShop,st.errorUpdateShop,null),pt=function(){return function(e){e(st.resetShopStatus())}},bt=function(){return function(e){e(st.resetShop())}},mt=Object(V.b)(null,(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},s),e))}))((function(e){var t=at(),n=Object(O.g)(),a=e.shops;Object(u.useEffect)((function(){0===(null===a||void 0===a?void 0:a.length)&&n.replace("/home")}),[]);return Object(ae.jsxs)("div",{className:t.page,children:[Object(ae.jsx)(ee.a,{variant:"h2",color:"textSecondary",children:"Choose Shop"}),Object(ae.jsx)("div",{className:t.containerList,children:null===a||void 0===a?void 0:a.map((function(a){return Object(ae.jsxs)("div",{className:t.shopContainer,children:[Object(ae.jsxs)("div",{children:[Object(ae.jsx)("p",{className:t.name,children:a.name}),Object(ae.jsx)("p",{className:t.location,children:a.location})]}),Object(ae.jsx)("div",{className:t.buttonContainer,children:Object(ae.jsx)(ne.a,{variant:"contained",color:"primary",onClick:function(){return function(t){e.setShopInteractor(t),n.replace("/home")}(a)},children:"Login as this Shop"})})]},a.id)}))})]})})),Ot=Object(V.b)((function(e){return{company:e.company}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},c),e))}))((function(e){var t=le(),n=Object(u.useState)(""),a=Object(p.a)(n,2),r=a[0],o=a[1],c=Object(u.useState)(""),s=Object(p.a)(c,2),i=s[0],l=s[1],d=Object(u.useState)(""),j=Object(p.a)(d,2),b=j[0],m=j[1],O=Object(u.useState)(""),h=Object(p.a)(O,2),f=h[0],g=h[1],v=Object(u.useState)(""),x=Object(p.a)(v,2),S=x[0],C=x[1],y=Object(u.useState)(""),w=Object(p.a)(y,2),I=w[0],N=w[1],P=Object(u.useState)(""),T=Object(p.a)(P,2),A=T[0],R=T[1],E=e.company,k=r&&i&&!S&&b&&!I&&f&&!A;return Object(ae.jsxs)($.a,{className:t.popUp,component:"main",variant:"outlined",children:[Object(ae.jsx)(Se.a,{}),Object(ae.jsxs)("div",{className:t.paper,children:[E.registerCompanyStatus.loading&&Object(ae.jsx)(Ce.a,{}),Object(ae.jsx)(ee.a,{component:"h1",variant:"h5",children:"Company Sign Up"}),Object(ae.jsxs)("div",{className:t.form,children:[Object(ae.jsx)(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"name",label:"Company name",name:"name",autoFocus:!0,onChange:function(e){o(e.target.value)}}),Object(ae.jsx)(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,id:"email",label:"Company email",name:"email",onChange:function(e){var t=e.target.value;t&&!function(e){return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())}(t)?C("This must be an email"):C(""),l(t)}}),Object(ae.jsx)(ee.a,{variant:"body2",className:t.alertMessage,children:S}),Object(ae.jsx)(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",onChange:function(e){var t=e.target.value;t&&t.length<=7?N("Password must be longer than 7 characters"):N(""),m(t)}}),Object(ae.jsx)(ee.a,{variant:"body2",className:t.alertMessage,children:I}),Object(ae.jsx)(ye.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm password",type:"password",id:"confirmPassword",onChange:function(e){var t=e.target.value;R(b!==t?"Passwords don't match":""),g(t)}}),Object(ae.jsx)(ee.a,{variant:"body2",className:t.alertMessage,children:A}),Object(ae.jsx)(ne.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:!k,onClick:function(){var t={name:r,email:i,password:b};e.registerCompanyInteractor(t),o(""),l(""),m(""),g("")},children:"Company Sign Up"}),E.registerCompanyStatus.error&&Object(ae.jsx)(ee.a,{children:"An error ocurred, probably the company already exists."})]})]}),Object(ae.jsx)(ne.a,{color:"default",size:"small",onClick:e.toggleForm,children:"Already have a company, sign in instead"})]})})),ht=n(317),ft=n(335),gt=(n(152),Object(V.b)((function(e){return{company:e.company}}))((function(e){var t=e.company,n=Object(O.g)(),a=l.a.useRef(null),r=Object(u.useState)(!1),o=Object(p.a)(r,2),c=o[0],s=o[1],i=Object(u.useState)(!0),d=Object(p.a)(i,2),j=d[0],b=d[1];Object(u.useEffect)((function(){t.loginCompanyStatus.success&&s(!0),t.registerCompanyStatus.success&&n.replace("/home")}),[t.loginCompanyStatus,t.registerCompanyStatus]);var m=function(){b(!j)};return Object(ae.jsx)(ae.Fragment,{children:Object(ae.jsx)(ht.a,{mode:"out-in",children:Object(ae.jsx)(ft.a,{nodeRef:a,timeout:{enter:200,exit:200},classNames:"fade",children:j?Object(ae.jsx)("div",{ref:a,children:c?Object(ae.jsx)(mt,{shops:t.shops}):Object(ae.jsx)(nt,{toggleForm:m})}):Object(ae.jsx)("div",{ref:a,children:Object(ae.jsx)(Ot,{toggleForm:m})})},j?"signinIn":"signinUp")})})}))),vt=Object(Y.a)({mainContainer:{margin:"30px auto",height:"70vh",width:"70vw"},section:{position:"relative",textAlign:"left",margin:"15px 5px",padding:5},buttonContainer:{position:"absolute",right:5,bottom:5}}),xt=function(e){var t=vt(),n=e.title,a=e.body,r=e.callback;return Object(ae.jsxs)("div",{className:t.section,children:[Object(ae.jsxs)(ee.a,{variant:"h5",color:"textPrimary",children:[n," Menu"]}),Object(ae.jsx)(ee.a,{variant:"body1",color:"textPrimary",component:"p",children:a}),Object(ae.jsx)("div",{className:t.buttonContainer,children:Object(ae.jsxs)(ne.a,{variant:"contained",onClick:r,children:["Go to ",n," Menu"]})})]})},St=Object(V.b)(null,(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)(Object(b.a)(Object(b.a)(Object(b.a)({},c),s),o),r),e))}))((function(e){var t=Object(O.g)();return Object(ae.jsx)(ne.a,{variant:"outlined",color:"secondary",onClick:function(){e.resetShopInteractor(),e.logoutUserInteractor(),e.resetCatalogueInteractor(),e.logoutCompanyInteractor(),t.replace("/")},children:"Company Logout"})})),Ct=Object(V.b)((function(e){return{user:e.user}}))((function(e){var t=Object(O.g)(),n=vt(),a=e.user;return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(ee.a,{variant:"h2",color:"textSecondary",children:"Administration Portal"}),Object(ae.jsxs)("div",{className:n.mainContainer,children:[Object(ae.jsx)(xt,{title:"Video Calls",body:"Menu for managing video calls from current store.",callback:function(){t.push("/administration/calls")}}),"ADMINISTRATOR"===a.sessionType&&Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)(xt,{title:"Catalogue",body:"Menu for adding, removing or updating products from the main catalogue.",callback:function(){t.push("/administration/catalogue")}}),Object(ae.jsx)(xt,{title:"Shop",body:"Menu for updating shops, their location, policies and other specifications.",callback:function(){t.push("/administration/shop")}}),Object(ae.jsx)(xt,{title:"Employee's",body:"Menu for updating employee's status and for managing store employees.",callback:function(){t.push("/administration/employees")}})]}),Object(ae.jsx)(St,{})]})]})})),yt=function(){var e=Object(E.a)(R.a.mark((function e(t){var n,a,r,o,c;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.peerConnection,a=t.webcamVideo,r=t.remoteVideo,e.next=3,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 3:return o=e.sent,c=new MediaStream,o.getTracks().forEach((function(e){n.addTrack(e,o)})),n.ontrack=function(e){e.streams[0].getTracks().forEach((function(e){c.addTrack(e)}))},a.srcObject=o,r.srcObject=c,e.abrupt("return",{localStream:o,remoteStream:c});case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wt=n(95),It=(n(250),{apiKey:Object({NODE_ENV:"production",PUBLIC_URL:"/frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_API_KEY,authDomain:Object({NODE_ENV:"production",PUBLIC_URL:"/frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_AUTH_DOMAIN,projectId:Object({NODE_ENV:"production",PUBLIC_URL:"/frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_PROJECT_ID,storageBucket:Object({NODE_ENV:"production",PUBLIC_URL:"/frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_STORAGE_BUCKET,messagingSenderId:Object({NODE_ENV:"production",PUBLIC_URL:"/frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_MESSAGING_SENDER_ID,appId:Object({NODE_ENV:"production",PUBLIC_URL:"/frontend",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_APP_ID});wt.a.apps.length||(wt.a.initializeApp(It),wt.a.firestore().settings({experimentalForceLongPolling:!0}));var Nt={firestore:wt.a.firestore(),peerConnection:new RTCPeerConnection({iceServers:[{urls:["stun:stun1.l.google.com:19302","stun:stun2.l.google.com:19302"]}],iceCandidatePoolSize:10}),localStream:null,remoteStream:null},Pt=Object(g.a)({name:"connection",initialState:Nt,reducers:{addLocalStream:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{localStream:t.payload})},removeLocalStream:function(e){return Object(b.a)(Object(b.a)({},e),{},{localStream:Nt.localStream})},addRemoteStream:function(e,t){return Object(b.a)(Object(b.a)({},e),{},{remoteStream:t.payload})},removeRemoteStream:function(e){return Object(b.a)(Object(b.a)({},e),{},{remoteStream:Nt.remoteStream})},resetStreamConnection:function(e){return Object(b.a)(Object(b.a)({},e),{},{peerConnection:Nt.peerConnection,localStream:Nt.localStream,remoteStream:Nt.remoteStream})}}}),Tt=Pt.reducer,At=Pt.actions,Rt=B(At.addLocalStream),Et=H(At.removeLocalStream),kt=B(At.addRemoteStream),Ut=H(At.removeRemoteStream),Lt=H(At.resetStreamConnection),Dt=function(){var e=Object(E.a)(R.a.mark((function e(t){var n,a,r,o,c,s,i,u,l,d,j;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.firestore,a=t.shopId,r=t.callId,o=t.peerConnection,c=n.collection("shopCalls").doc(a).collection("calls").doc(r),s=c.collection("answerCandidates"),i=c.collection("offerCandidates"),o.onicecandidate=function(e){e.candidate&&s.add(e.candidate.toJSON())},e.next=7,c.get();case 7:return u=e.sent.data(),l=null===u||void 0===u?void 0:u.offer,e.next=11,o.setRemoteDescription(new RTCSessionDescription(l));case 11:return e.next=13,o.createAnswer();case 13:return d=e.sent,e.next=16,o.setLocalDescription(d);case 16:return j={type:d.type,sdp:d.sdp},e.next=19,c.update({answer:j,"status.answered":!0});case 19:i.onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"===e.type){var t=e.doc.data();o.addIceCandidate(new RTCIceCandidate(t))}}))}));case 20:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_t=Object(V.b)((function(e){return{connection:e.connection}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},i),e))}))((function(e){var t=e.callId,n=e.shopId,a=e.connection,r=a.firestore,o=a.peerConnection,c=Object(u.useRef)(),s=Object(u.useRef)();Object(u.useEffect)((function(){var t={peerConnection:o,webcamVideo:c.current,remoteVideo:s.current};return e.connection.localStream&&e.connection.remoteStream||yt(t).then((function(t){var n=t.localStream,a=t.remoteStream;e.setLocalStreamInteractor(n),e.setRemoteStreamInteractor(a)})).then((function(){return i()})),function(){l(),c.current&&s.current&&(c.current.srcObject=null,s.current.srcObject=null),e.resetStreamConnectionInteractor()}}),[]);var i=function(){var e=Object(E.a)(R.a.mark((function e(){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dt({firestore:r,shopId:n,callId:t,peerConnection:o});case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=Object(u.useCallback)(Object(E.a)(R.a.mark((function n(){return R.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("This it a test console log to prevent firestore excessive requests..."),n.next=4,r.collection("shopCalls").doc(e.shopId).collection("calls").doc(t).delete();case 4:n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),console.log(n.t0);case 9:return n.prev=9,e.setOnCall(null),n.finish(9);case 12:case"end":return n.stop()}}),n,null,[[0,6,9,12]])}))),[]);return Object(ae.jsxs)("div",{className:"employee-main-container",children:[Object(ae.jsx)("video",{className:"employee-local-video-container",ref:c,autoPlay:!0,playsInline:!0}),Object(ae.jsx)("video",{className:"employee-remote-video-container",ref:s,autoPlay:!0,playsInline:!0}),Object(ae.jsx)("div",{className:"employee-button-container",children:Object(ae.jsx)(ne.a,{variant:"contained",color:"secondary",onClick:l,children:"Hang up"})})]})})),Wt=n(319),Ft=n(321),Bt=(n(153),n(310)),Ht=n(254),Mt=n(318),zt=n(320),Kt=Object(V.b)((function(e){return{connection:e.connection,shopId:e.shop.id}}))((function(e){var t=e.connection.firestore,n=Object(u.useState)([]),a=Object(p.a)(n,2),r=a[0],o=a[1],c=Object(u.useState)(null),s=Object(p.a)(c,2),i=s[0],l=s[1],d=Object(u.useState)(!0),j=Object(p.a)(d,2),b=j[0],m=j[1],O=Object(u.useRef)([]);Object(u.useEffect)((function(){console.log("This it a test console log to prevent firestore excessive requests...");var n=t.collection("shopCalls").doc(e.shopId).collection("calls").onSnapshot((function(e){e.docChanges().forEach((function(e){"added"===e.type&&(e.doc.data().status.answered||(O.current.push(e.doc.id),o((function(t){return[].concat(Object(w.a)(t),[e.doc.id])})))),"modified"!==e.type&&"removed"!==e.type||(O.current=O.current.filter((function(t){return t!==e.doc.id})),o(O.current.filter((function(t){return t!==e.doc.id}))))})),m(!1)}));return function(){n()}}),[t]);var h=function(){var e=Object(E.a)(R.a.mark((function e(t){return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.current=r,!i&&l(t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(ae.jsxs)("div",{children:[Object(ae.jsx)(ee.a,{variant:"h2",gutterBottom:!0,children:"Call Requests"}),Object(ae.jsxs)("div",{className:"requests-container",children:[Object(ae.jsxs)(Bt.a,{className:"list",children:[0===r.length&&Object(ae.jsxs)(Ht.a,{className:"item",button:!0,disabled:!0,children:[Object(ae.jsx)(Mt.a,{children:Object(ae.jsx)(Wt.a,{})}),Object(ae.jsx)(zt.a,{primary:"No calls yet..."})]}),r.map((function(e,t){return Object(ae.jsxs)(Ht.a,{className:"item",button:!0,disabled:!!i,onClick:function(){return h(e)},children:[Object(ae.jsx)(Mt.a,{children:Object(ae.jsx)(Ft.a,{})}),Object(ae.jsx)(zt.a,{primary:"Answer client ".concat(t+1," call")})]},e)}))]}),b&&Object(ae.jsx)(Ue.a,{})]}),i&&Object(ae.jsx)(_t,{callId:i,setOnCall:l,shopId:e.shopId})]})})),qt=Object(Y.a)((function(e){return Object(ce.a)({mainContainer:{width:"80%",margin:"8vh auto auto"},heading:{fontSize:"1.1rem",flexBasis:"33.33%",flexShrink:0,textAlign:"left"},secondaryHeading:{fontSize:"0.95rem",color:e.palette.text.secondary},formControl:{margin:e.spacing(1),minWidth:120,textAlign:"left"},fab:{margin:e.spacing(2)}})})),Gt=n(82),Vt=n.n(Gt),Yt=n(168),Jt=n.n(Yt),$t=n(322),Zt=n(253),Qt=function(e){var t=e.message,n=e.openedStateInParent,a=Object(u.useState)(!0),r=Object(p.a)(a,2),o=r[0],c=r[1];return Object(ae.jsx)("div",{children:Object(ae.jsx)($t.a,{in:o,children:Object(ae.jsx)(Re.a,{action:Object(ae.jsx)(Zt.a,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){c(!1),setTimeout((function(){n(!1)}),2e3)},children:Object(ae.jsx)(Jt.a,{fontSize:"inherit"})}),children:t})})})},Xt=function(e){var t=!0;return e.replace(/\s/g,"").length||(t=!1),e||(t=!1),t},en=n(338),tn=n(323),nn=n(324),an=n(309),rn=n(341),on=n(331),cn=n(325),sn=n(326),un=n(327),ln=Object(V.b)((function(e){return{shop:e.shop,catalogue:e.catalogue}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},r),e))}))((function(e){var t=e.expanded,n=e.handleChange,a=e.panel,r=e.heading,o=e.summary,c=e.shop,s=e.catalogue,i=Object(u.useState)(""),l=Object(p.a)(i,2),d=l[0],j=l[1],b=Object(u.useState)(""),m=Object(p.a)(b,2),O=m[0],h=m[1],f=Object(u.useState)(""),g=Object(p.a)(f,2),v=g[0],x=g[1],S=Object(u.useState)(""),C=Object(p.a)(S,2),y=C[0],w=C[1],I=Object(u.useState)(""),N=Object(p.a)(I,2),P=N[0],T=N[1],A=Object(u.useState)(""),R=Object(p.a)(A,2),E=R[0],k=R[1],U=Object(u.useState)(!1),L=Object(p.a)(U,2),D=L[0],_=L[1],W=qt();Object(u.useEffect)((function(){s.addProductToCatalogue.success&&(_(!0),e.resetCatalogueInteractor())}),[s.addProductToCatalogue,_,e.resetCatalogueInteractor]);var F=function(){j(""),h(""),x(""),w(""),T(""),k("")},B=Xt(d)&&Xt(O)&&Xt(v)&&Xt(y)&&Xt(P)&&Xt(E);return Object(ae.jsxs)(en.a,{TransitionProps:{unmountOnExit:!0},expanded:t===a,onChange:n(a),children:[Object(ae.jsxs)(tn.a,{expandIcon:Object(ae.jsx)(Vt.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:[Object(ae.jsx)(ee.a,{className:W.heading,children:r}),Object(ae.jsx)(ee.a,{className:W.secondaryHeading,children:o})]}),Object(ae.jsx)(nn.a,{children:Object(ae.jsx)(ye.a,{value:d,variant:"standard",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",onChange:function(e){return j(e.target.value)}})}),Object(ae.jsx)(nn.a,{children:Object(ae.jsx)(ye.a,{value:O,variant:"standard",required:!0,fullWidth:!0,id:"brand",label:"Brand",name:"brand",onChange:function(e){return h(e.target.value)}})}),Object(ae.jsx)(nn.a,{children:Object(ae.jsxs)(an.a,{variant:"outlined",className:W.formControl,fullWidth:!0,children:[Object(ae.jsx)(rn.a,{id:"demo-simple-select-outlined-label",children:"OS"}),Object(ae.jsxs)(on.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:v,onChange:function(e){return function(e){x(e.target.value)}(e)},label:"Age",children:[Object(ae.jsx)(cn.a,{value:"Android",children:"Android"}),Object(ae.jsx)(cn.a,{value:"IOS",children:"IOS"}),Object(ae.jsx)(cn.a,{value:"Windows",children:"Windows"})]})]})}),Object(ae.jsx)(nn.a,{children:Object(ae.jsx)(ye.a,{value:y,variant:"standard",required:!0,fullWidth:!0,id:"color",label:"Device Color",name:"color",onChange:function(e){return w(e.target.value)}})}),Object(ae.jsx)(nn.a,{children:Object(ae.jsx)(ye.a,{value:P,variant:"standard",type:"number",required:!0,fullWidth:!0,id:"inches",label:"Inches",name:"inches",onChange:function(e){return T(e.target.value)}})}),Object(ae.jsx)(nn.a,{children:Object(ae.jsx)(ye.a,{value:E,variant:"standard",type:"number",required:!0,fullWidth:!0,id:"price",label:"Price",name:"price",onChange:function(e){return k(e.target.value)}})}),Object(ae.jsx)(sn.a,{}),Object(ae.jsxs)(un.a,{children:[Object(ae.jsx)(ne.a,{size:"small",onClick:function(){return F()},children:"Cancel"}),Object(ae.jsx)(ne.a,{size:"small",color:"primary",disabled:!B,onClick:function(){var t={shopId:c.id,name:d,brand:O,os:v,color:y,inches:P,price:E};e.addProductToCatalogueInteractor(t),F()},children:"Create Product"})]}),s.addProductToCatalogue.loading&&Object(ae.jsx)(Ue.a,{}),D&&Object(ae.jsx)(Qt,{message:"Product successfully created, you can close this menu now.",openedStateInParent:_})]})})),dn=n(178),jn=n(328),pn=n(169),bn=n(176),mn=Object(V.b)((function(e){return{shop:e.shop,catalogue:e.catalogue}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},r),e))}))((function(e){var t=qt(),n=Object(u.useState)(null),a=Object(p.a)(n,2),r=a[0],o=a[1],c=e.shop,s=e.catalogue,i=Object(u.useState)(!1),l=Object(p.a)(i,2),d=l[0],j=l[1],b=Object(u.useState)(""),m=Object(p.a)(b,2),O=m[0],h=m[1];Object(u.useEffect)((function(){s.addProductsToCatalogue.success&&(j(!0),e.resetCatalogueInteractor())}),[s.addProductsToCatalogue,e.resetCatalogueInteractor]);return Object(ae.jsxs)(dn.a,{elevation:1,children:[Object(ae.jsxs)("div",{className:"flex-container-between",children:[Object(ae.jsx)(ee.a,{className:t.heading,children:"Import Products from CSV"}),Object(ae.jsxs)("div",{className:"flex-container-evenly",children:[Object(ae.jsx)(pn.a,{onDrop:function(e){o(e)},onError:function(e){h("An unexpected error ocurred: ".concat(e))},addRemoveButton:!0,children:Object(ae.jsx)("span",{children:"Drop CSV file here or click to upload."})}),Object(ae.jsx)(jn.a,{color:"primary",className:t.fab,onClick:function(){var t=[];null===r||void 0===r||r.slice(1).forEach((function(e){var n={shopId:c.id,name:e.data[0],brand:e.data[1],os:e.data[2],color:e.data[3],inches:e.data[4],price:e.data[5]};(function(e){var t=!0;return Object.values(e).forEach((function(e){void 0!=e&&""!=e||(t=!1)})),t})(n)&&t.push(n)})),e.addProductsToCatalogueInteractor(t)},children:Object(ae.jsx)(bn.a,{style:{fontSize:30}})})]})]}),s.addProductsToCatalogue.loading&&Object(ae.jsx)(Ue.a,{}),d&&Object(ae.jsx)(Qt,{message:"Products successfully created, you can close this menu now.",openedStateInParent:j}),O]})})),On=n(329),hn=Object(V.b)((function(e){return{catalogue:e.catalogue}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},r),e))}))((function(e){var t=e.expanded,n=e.handleChange,a=e.panel,r=e.heading,o=e.summary,c=e.catalogue,s=Object(u.useState)(!1),i=Object(p.a)(s,2),l=i[0],d=i[1],j=qt();Object(u.useEffect)((function(){c.deleteProductFromCatalogue.success&&d(!0)}),[c.deleteProductFromCatalogue,d]);return Object(ae.jsxs)(en.a,{TransitionProps:{unmountOnExit:!0},expanded:t===a,onChange:n(a),children:[Object(ae.jsxs)(tn.a,{expandIcon:Object(ae.jsx)(Vt.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:[Object(ae.jsx)(ee.a,{className:j.heading,children:r}),Object(ae.jsx)(ee.a,{className:j.secondaryHeading,children:o})]}),Object(ae.jsx)(Bt.a,{dense:!0,children:c.products.map((function(t){return Object(ae.jsxs)(Ht.a,{button:!0,children:[Object(ae.jsx)(zt.a,{id:t.id,primary:"".concat(t.name),secondary:"Brand: ".concat(t.brand," ").concat(t.os," Color: ").concat(t.color)}),Object(ae.jsx)(On.a,{children:Object(ae.jsx)(ne.a,{size:"small",variant:"contained",color:"secondary",onClick:function(){return n=t.id,void e.deleteProductFromCatalogueInteractor(n);var n},children:"Delete"})})]},t.id)}))}),Object(ae.jsx)(sn.a,{}),c.deleteProductFromCatalogue.loading&&Object(ae.jsx)(Ue.a,{}),l&&Object(ae.jsx)(Qt,{message:"Product successfully deleted, you can close this menu now.",openedStateInParent:d})]})})),fn=(n(245),function(){var e=Object(O.g)(),t=qt(),n=Object(u.useState)(!1),a=Object(p.a)(n,2),r=a[0],o=a[1],c=function(e){return function(t,n){o(!!n&&e)}};return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)("div",{className:t.mainContainer,children:[Object(ae.jsx)(ln,{expanded:r,handleChange:c,panel:"panel1",heading:"Create Single Product",summary:"Here you can create a product for this shop, giving all its necesary attributes."}),Object(ae.jsx)(mn,{}),Object(ae.jsx)(hn,{expanded:r,handleChange:c,panel:"panel2",heading:"Delete Product",summary:"Here you can delete a product from this shop."})]}),Object(ae.jsx)("div",{className:"btn-bottom-left",children:Object(ae.jsx)(ne.a,{variant:"contained",color:"primary",onClick:function(){e.go(-1)},children:"Back"})})]})}),gn=function(){return Object(ae.jsx)("div",{children:Object(ae.jsx)("p",{children:"Employees Menu"})})},vn=Object(V.b)((function(e){return{company:e.company,shop:e.shop}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},s),e))}))((function(e){var t=e.expanded,n=e.handleChange,a=e.panel,r=e.heading,o=e.summary,c=e.company,s=e.shop,i=e.addShopInteractor,l=e.resetShopStatusInteractor,d=Object(u.useState)(""),j=Object(p.a)(d,2),b=j[0],m=j[1],O=Object(u.useState)(""),h=Object(p.a)(O,2),f=h[0],g=h[1],v=Object(u.useState)(!1),x=Object(p.a)(v,2),S=x[0],C=x[1],y=qt();Object(u.useEffect)((function(){s.addShopStatus.success&&(C(!0),l())}),[s.addShopStatus,C,l]);var w=function(){m(""),g("")};return Object(ae.jsxs)(en.a,{TransitionProps:{unmountOnExit:!0},expanded:t===a,onChange:n(a),children:[Object(ae.jsxs)(tn.a,{expandIcon:Object(ae.jsx)(Vt.a,{}),"aria-controls":"panel1bh-content",id:"panel1bh-header",children:[Object(ae.jsx)(ee.a,{className:y.heading,children:r}),Object(ae.jsx)(ee.a,{className:y.secondaryHeading,children:o})]}),Object(ae.jsx)(nn.a,{children:Object(ae.jsx)(ye.a,{value:b,variant:"standard",required:!0,fullWidth:!0,id:"name",label:"Name",name:"name",onChange:function(e){return m(e.target.value)}})}),Object(ae.jsx)(nn.a,{children:Object(ae.jsx)(ye.a,{value:f,variant:"standard",required:!0,fullWidth:!0,id:"location",label:"Location",name:"location",onChange:function(e){return g(e.target.value)}})}),Object(ae.jsx)(sn.a,{}),Object(ae.jsxs)(un.a,{children:[Object(ae.jsx)(ne.a,{size:"small",onClick:function(){return w()},children:"Cancel"}),Object(ae.jsx)(ne.a,{size:"small",color:"primary",disabled:!(Xt(b)&&Xt(f)),onClick:function(){var e={companyId:c.id,name:b,location:f};i(e),w()},children:"Create Shop"})]}),s.addShopStatus.loading&&Object(ae.jsx)(Ue.a,{}),S&&Object(ae.jsx)(Qt,{message:"Shop successfully created, you can close this menu now.",openedStateInParent:C})]})})),xn=function(){var e=qt(),t=Object(u.useState)(!1),n=Object(p.a)(t,2),a=n[0],r=n[1];return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)("div",{className:e.mainContainer,children:Object(ae.jsx)(vn,{expanded:a,handleChange:function(e){return function(t,n){r(!!n&&e)}},panel:"panel1",heading:"Create Shop",summary:"Here you can create a shop, giving all its necesary attributes."})}),Object(ae.jsx)("div",{className:"btn-bottom-left",children:Object(ae.jsx)(ne.a,{variant:"contained",color:"primary",onClick:function(){history.go(-1)},children:"Back"})})]})},Sn=(n(246),Object(V.b)((function(e){return{products:e.catalogue.products}}))((function(e){var t=e.products,n=Object(O.g)(),a=Object(u.useState)(),r=Object(p.a)(a,2),o=r[0],c=r[1],s=window.location.pathname.split("/")[3];Object(u.useEffect)((function(){if((null===o||void 0===o?void 0:o.id)!==s){var e=t.find((function(e){return e.id===s}));c(e)}}),[o]);var i=Object(u.useCallback)((function(){n.push("/home/call")}),[]);return Object(ae.jsxs)("div",{className:"main-container",children:[Object(ae.jsxs)("div",{className:"details-container",children:[Object(ae.jsx)(ee.a,{className:"title",variant:"h3",children:"Device Details"}),Object(ae.jsxs)("div",{className:"detail",children:[Object(ae.jsx)(ee.a,{className:"detail-label",variant:"h5",gutterBottom:!0,children:"Name:"}),Object(ae.jsx)(ee.a,{className:"detail-body",variant:"h6",gutterBottom:!0,children:null===o||void 0===o?void 0:o.name})]}),Object(ae.jsxs)("div",{className:"detail",children:[Object(ae.jsx)(ee.a,{className:"detail-label",variant:"h5",gutterBottom:!0,children:"Brand:"}),Object(ae.jsx)(ee.a,{className:"detail-body",variant:"h6",gutterBottom:!0,children:null===o||void 0===o?void 0:o.brand})]}),Object(ae.jsxs)("div",{className:"detail",children:[Object(ae.jsx)(ee.a,{className:"detail-label",variant:"h5",gutterBottom:!0,children:"Color:"}),Object(ae.jsx)(ee.a,{className:"detail-body",variant:"h6",gutterBottom:!0,children:null===o||void 0===o?void 0:o.color})]}),Object(ae.jsxs)("div",{className:"detail",children:[Object(ae.jsx)(ee.a,{className:"detail-label",variant:"h5",gutterBottom:!0,children:"Screen Inches:"}),Object(ae.jsx)(ee.a,{className:"detail-body",variant:"h6",gutterBottom:!0,children:null===o||void 0===o?void 0:o.inches})]}),Object(ae.jsxs)("div",{className:"detail",children:[Object(ae.jsx)(ee.a,{className:"detail-label",variant:"h5",gutterBottom:!0,children:"Operative System:"}),Object(ae.jsx)(ee.a,{className:"detail-body",variant:"h6",gutterBottom:!0,children:null===o||void 0===o?void 0:o.os})]}),Object(ae.jsxs)("div",{className:"detail",children:[Object(ae.jsx)(ee.a,{className:"detail-label",variant:"h5",gutterBottom:!0,children:"Price:"}),Object(ae.jsxs)(ee.a,{className:"detail-body",variant:"h6",gutterBottom:!0,children:[null===o||void 0===o?void 0:o.price," CLP"]})]}),Object(ae.jsx)("div",{className:"customer-button-container",children:Object(ae.jsx)(ne.a,{variant:"contained",color:"primary",onClick:function(){return i()},children:"Get Assistance"})})]}),Object(ae.jsx)("div",{className:"photo-container"})]})}))),Cn=n(330),yn=function(){var e=Object(E.a)(R.a.mark((function e(t){var n,a,r,o,c,s,i,u,l,d,j;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.firestore,a=t.shopId,r=t.peerConnection,o=t.setCalling,c=t.setIsOnCall,s=n.collection("shopCalls").doc(a).collection("calls").doc(),i=null===s||void 0===s?void 0:s.collection("offerCandidates"),u=null===s||void 0===s?void 0:s.collection("answerCandidates"),o(!0),c(!0),r.onicecandidate=function(e){e.candidate&&i.add(e.candidate.toJSON())},e.next=9,r.createOffer();case 9:return l=e.sent,e.next=12,r.setLocalDescription(l);case 12:return d={sdp:l.sdp,type:l.type},j={answered:!1,date:new Date},e.next=16,s.set({offer:d,status:j});case 16:return s.onSnapshot((function(e){var t=e.data();if(!r.currentRemoteDescription&&(null===t||void 0===t?void 0:t.answer)){var n=new RTCSessionDescription(t.answer);r.setRemoteDescription(n)}})),u.onSnapshot((function(e){e.docChanges().forEach((function(e){if("added"===e.type){var t=new RTCIceCandidate(e.doc.data());r.addIceCandidate(t),o(!1)}}))})),e.abrupt("return",s.id);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wn=Object(V.b)((function(e){return{connection:e.connection,shopId:e.shop.id}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)({},i),e))}))((function(e){var t=e.connection,n=t.firestore,a=t.peerConnection,r=Object(O.g)(),o=Object(u.useRef)(),c=Object(u.useRef)(),s=Object(u.useRef)(),i=Object(u.useState)(!1),l=Object(p.a)(i,2),d=l[0],j=l[1],b=Object(u.useState)(!1),m=Object(p.a)(b,2),h=m[0],f=m[1];Object(u.useEffect)((function(){console.log("This it a test console log to prevent firestore excessive requests..."),n.collection("shopCalls").doc(e.shopId).set({updatedAt:new Date});var t={peerConnection:a,webcamVideo:o.current,remoteVideo:c.current};return yt(t).then((function(t){var n=t.localStream,a=t.remoteStream;e.setLocalStreamInteractor(n),e.setRemoteStreamInteractor(a)})),function(){o.current&&c.current&&(o.current.srcObject=null,c.current.srcObject=null),e.resetStreamConnectionInteractor()}}),[]);var g=function(){var t=Object(E.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,yn({firestore:n,shopId:e.shopId,peerConnection:a,setCalling:f,setIsOnCall:j});case 2:s.current=t.sent;case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),v=function(){var t=Object(E.a)(R.a.mark((function t(){return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return j(!1),t.prev=1,t.next=4,n.collection("shopCalls").doc(e.shopId).collection("calls").doc(s.current).delete();case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:return t.prev=9,r.go(-1),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,6,9,12]])})));return function(){return t.apply(this,arguments)}}();return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsxs)("div",{className:"customer-main-container",children:[Object(ae.jsx)("video",{className:"local-video-container",ref:o,autoPlay:!0,playsInline:!0}),Object(ae.jsx)("video",{className:"remote-video-container",ref:c,autoPlay:!0,playsInline:!0}),Object(ae.jsx)("div",{className:"customer-button-container",children:Object(ae.jsxs)(Cn.a,{orientation:"vertical",color:"primary","aria-label":"vertical contained primary button group",variant:"contained",children:[Object(ae.jsx)(ne.a,{size:"small",variant:"contained",color:"primary",disabled:d,onClick:g,children:"Call Assistant"}),Object(ae.jsx)(ne.a,{size:"small",variant:"contained",color:"secondary",disabled:!d,onClick:v,children:"Hang up"})]})})]}),h&&Object(ae.jsx)(Ue.a,{})]})})),In=function(){return Object(ae.jsxs)(ae.Fragment,{children:[Object(ae.jsx)("h1",{children:"Getting Assistance"}),Object(ae.jsx)("div",{className:"customer-call-container",children:Object(ae.jsx)(wn,{})})]})},Nn=n(171),Pn=n.n(Nn),Tn=(n(160),Object(V.b)((function(e){return{user:e.user,company:e.company}}),(function(e){return Object(b.a)({},Object(f.bindActionCreators)(Object(b.a)(Object(b.a)({},o),a),e))}))((function(e){var t=e.user,n=e.company,a=Object(O.g)();return Object(ae.jsxs)("div",{className:"options",children:[n.id&&Object(ae.jsx)(ne.a,{color:"inherit",onClick:function(){a.replace("/home")},children:"Home"}),"ANONYMOUS"!==t.sessionType&&Object(ae.jsx)(ne.a,{color:"inherit",onClick:function(){a.replace("/administration")},children:"Administration"})]})}))),An=Object(Y.a)((function(e){return{root:{flexGrow:1},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1,textAlign:"left"}}})),Rn=function(e){var t=e.component,n=Object(m.a)(e,["component"]),a=Object(V.c)((function(e){return e.user}));return Object(ae.jsx)(O.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return"ANONYMOUS"!==a.sessionType?Object(ae.jsx)(t,Object(b.a)({},e)):Object(ae.jsx)(O.a,{to:"/home"})}}))},En=function(e){var t=e.component,n=Object(m.a)(e,["component"]),a=Object(V.c)((function(e){return e.user}));return Object(ae.jsx)(O.b,Object(b.a)(Object(b.a)({},n),{},{render:function(e){return"ADMINISTRATOR"===a.sessionType?Object(ae.jsx)(t,Object(b.a)({},e)):Object(ae.jsx)(O.a,{to:"/administration"})}}))},kn=function(){var e=An(),t=Object(u.useState)(!1),n=Object(p.a)(t,2),a=n[0],r=n[1],o=Object(u.useState)(a?"open":"closed"),c=Object(p.a)(o,2),s=c[0],i=c[1];return Object(ae.jsx)(h.a,{basename:"/frontend",children:Object(ae.jsxs)("div",{id:"layout",children:[Object(ae.jsxs)("div",{id:"left",className:s,children:[Object(ae.jsx)(Zt.a,{edge:"start",className:"icon ".concat(e.menuButton),color:"inherit","aria-label":"menu",onClick:function(){r(!a),i(a?"open":"closed")},children:Object(ae.jsx)(Pn.a,{})}),Object(ae.jsx)("div",{className:"sidebar ".concat(s),children:Object(ae.jsx)("div",{className:"content",children:Object(ae.jsx)(Tn,{})})})]}),Object(ae.jsxs)("div",{id:"main",children:[Object(ae.jsx)("div",{className:"header",children:Object(ae.jsx)("div",{className:"\n                          title\n                          ".concat("left-"+s,"\n                      "),children:Object(ae.jsx)(qe,{})})}),Object(ae.jsx)("div",{className:"content",id:"page",children:Object(ae.jsxs)(O.d,{children:[Object(ae.jsx)(O.b,{path:"/",exact:!0,component:gt}),Object(ae.jsx)(O.b,{path:"/home",exact:!0,component:He}),Object(ae.jsx)(O.b,{path:"/home/call",exact:!0,component:In}),Object(ae.jsx)(O.b,{path:"/product/:id/details",exact:!0,component:Sn}),Object(ae.jsx)(Rn,{path:"/administration",exact:!0,component:Ct}),Object(ae.jsx)(Rn,{path:"/administration/calls",exact:!0,component:Kt}),Object(ae.jsx)(En,{path:"/administration/shop",exact:!0,component:xn}),Object(ae.jsx)(En,{path:"/administration/catalogue",exact:!0,component:fn}),Object(ae.jsx)(En,{path:"/administration/employees",exact:!0,component:gn})]})})]})]})})},Un=function(){return Object(ae.jsx)("div",{className:"container",children:Object(ae.jsx)("div",{className:"App",children:Object(ae.jsx)(kn,{})})})},Ln=n(129),Dn=n(90),_n=n(172),Wn=n(173),Fn={key:"root",storage:n.n(Wn).a,whitelist:["company","user","shop","catalogue"]},Bn=Object(f.combineReducers)({user:pe,modal:x,catalogue:P,company:Ye,shop:ct,connection:Tt}),Hn=Object(Ln.a)(Fn,Bn),Mn=Object(f.createStore)(Hn,Object(_n.composeWithDevTools)(Object(f.applyMiddleware)(Dn.a))),zn=Object(Ln.b)(Mn),Kn=n(175),qn=n(174),Gn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Vn(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}var Yn=function(e){e&&e instanceof Function&&n.e(16).then(n.bind(null,342)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))},Jn=Object(Kn.a)(),$n=document.getElementById("root"),Zn=(/#!(\/.*)$/.exec(window.location.hash)||[])[1];Zn&&Jn.replace(Zn),j.a.render(Object(ae.jsx)(V.a,{store:Mn,children:Object(ae.jsx)(qn.a,{persistor:zn,children:Object(ae.jsx)(Un,{})})}),$n),function(e){if("serviceWorker"in navigator){if(new URL("/frontend",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/frontend","/service-worker.js");Gn?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var a=n.headers.get("content-type");404===n.status||null!=a&&-1===a.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):Vn(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):Vn(t,e)}))}}(),Yn()}},[[249,14,15]]]);
//# sourceMappingURL=main.3e7857ad.chunk.js.map